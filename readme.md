## Отчет

Самсонов Артём Арменович БПИ238

### Задание

Реализовать для родительского и дочернего процесса двухстороннюю связь с использованием только одного неименованного канала (pipe) и циклической организацией обмена посредством семафора Unix System V. При этом канал должен быть постоянно открытым. Интервал для обмена должен быть равен одной секунде. Обмен должен завершаться после поочередной передачи в каждую сторону по десять сообщений. По завершении обмена обеспечить корректное закрытие канала и удаление семафора.

**Опционально (+2 балла):** Вместо десяти обменов организовать поочередный обмен, завершающийся посылкой сигнала прерывания с клавиатуры родительскому или дочернему процессу. При этом оба процесса должны корректно завершить работу с закрытием каналов и удалением семафоров.

### Решение на 10 баллов

Программа реализует двусторонний обмен сообщениями между родительским и дочерним процессами с использованием **двух неименованных каналов** и двух семафоров System V для синхронизации. Обмен происходит поочередно. Также реализовано корректное завершение программы по сигналу `SIGINT` (Ctrl+C), что соответствует опциональному заданию.

- Создаются два неименованных канала: один для связи Родитель -> Потомок (`pipe_parent_to_child`), другой для связи Потомок -> Родитель (`pipe_child_to_parent`).
- Инициализируются два семафора с использованием `IPC_PRIVATE`: `SEMAPHORE_PARENT` (изначально 1) для синхронизации хода родителя и `SEMAPHORE_CHILD` (изначально 0) для синхронизации хода дочернего процесса.
- Родительский процесс пишет в `pipe_parent_to_child[1]` и читает из `pipe_child_to_parent[0]`. Дочерний процесс пишет в `pipe_child_to_parent[1]` и читает из `pipe_parent_to_child[0]`. В каждом процессе закрываются неиспользуемые концы каналов.
- Родитель и дочерний процесс обмениваются сообщениями в цикле, синхронизируясь с помощью семафоров. Родитель ждет `SEMAPHORE_PARENT`, пишет в свой канал для потомка, сигнализирует `SEMAPHORE_CHILD`, читает из канала от потомка. Потомок ждет `SEMAPHORE_CHILD`, читает из канала от родителя, пишет в свой канал для родителя, сигнализирует `SEMAPHORE_PARENT`.
- Обмен продолжается либо до 10 сообщений с каждой стороны, либо до получения сигнала `SIGINT`.
- Обработчик сигнала `SIGINT` устанавливает флаг `terminate_flag` для корректного выхода из циклов обмена.
- При завершении оба процесса закрывают свои дескрипторы каналов. Родительский процесс также удаляет набор семафоров.

### Запуск

1. Сохраните код в файл `os_bonus.c`.
2. Откройте терминал и перейдите в директорию с файлом.
3. Скомпилируйте и запустите программу:

   ```bash
   gcc os_bonus.c -o os_bonus && ./os_bonus
   ```

Программа начнет выполнение, и родительский и дочерний процессы будут обмениваться сообщениями. Чтобы остановить выполнение до завершения 10 обменов, нажмите `Ctrl+C`. 